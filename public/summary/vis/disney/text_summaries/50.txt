An armed conflict forces young couple Alma and Pedro Madrigal to flee their home village in Colombia with their infant triplets, Julieta, Pepa, and Bruno. Pedro is killed, but the candle Alma carries gains a magical power that repels the attackers and creates Casita, a sentient house located in a magical realm bordered by mountains.
Fifty years later, a new village thrives under the candle's protection, which grants "gifts" and corresponding bedrooms to each Madrigal descendant when they turn five, which they use to serve the villagers. Julieta's youngest daughter, Mirabel, is the only Madrigal to not be granted with a gift, while Bruno was vilified and scapegoated for his precognition, which resulted in his disappearing.
Ten years later, Pepa's youngest son, Antonio, is granted the ability to communicate with animals. During the celebration, Mirabel sees Casita cracking and the candle's flame flickering and goes downstairs to investigate. She alerts her family, but Casita repairs itself before the rest of the family can see the cracks. After overhearing Alma lament the candle's fading that night, Mirabel resolves to restore Casita's magic herself. Her older sister Luisa, who possesses superhuman strength, confesses to Mirabel that she feels overwhelmed with her constant obligation to help the villagers by using her strength, which has begun to falter. She suggests to Mirabel that Bruno's room, located inside a forbidden tower in Casita, may hold the secret to the fading magic.
Mirabel finds a cave in Bruno's room that holds pieces of his last vision made of opaque emerald. Most of the family warns Mirabel not to investigate further, but she reassembles the pieces into the form of a tablet and sees herself with Casita cracking behind her. Mirabel's father Agustín accidentally discovers her and warns her to keep the vision a secret, but they are overheard by Pepa's daughter Dolores, who possesses supernatural hearing. Mirabel's oldest sister Isabela, who can make plants instantly grow at will, is scheduled to be engaged to the Madrigals' neighbor Mariano Guzmán. Amidst Mariano's proposal during an awkward dinner, Dolores tells everyone about Mirabel's discovery. Casita begins to crack again, and everyone starts losing control of their gifts.
Mirabel follows rats carrying the pieces of the vision to a secret passage behind a portrait, where she finds Bruno, who reveals he never left Casita. His visions alternate between Mirabel saving Casita and destroying it, leading him to believe she is the key to the fate of Casita's magic. Not wanting Mirabel to be hurt, he destroyed the vision and isolated himself. At Mirabel's insistence, Bruno conjures another vision that depicts Mirabel and Isabela hugging after seemingly repairing their strained relationship, which strengthens the candle.
Mirabel attempts to apologize to Isabela, who confesses she is burdened by her image of perfection and does not want to marry Mariano. Mirabel helps Isabela use her powers more freely and they hug. When a furious Alma arrives, she accuses Mirabel of causing the family's misfortunes out of spite for not having a gift. In response, Mirabel denounces Alma's behavior and asserts that her harmful expectations for her family are the true cause of Casita dying. In the ensuing argument, Casita is demolished as the candle extinguishes, leaving the Madrigals powerless, and a distraught Mirabel runs away.
Alma finds Mirabel tearfully sitting beside the river where Pedro was killed and the miracle had begun. Alma realizes that her obsession with preserving the magic made her oblivious to how her expectations and pressure were harming the family. She expresses remorse, reconciles with Mirabel, and reunites with Bruno. The three return to the village and assemble the other Madrigals to rebuild Casita, and the townspeople join in, restoring the family's gifts and reviving Casita. The Madrigals celebrate and take a family photo.